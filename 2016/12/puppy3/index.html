<!DOCTYPE html>
<html lang="en-us">
  <head>
    <!-- <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} &middot; {{ .Site.Title }}{{ end }}</title> -->
<!-- {{ .Hugo.Generator }} -->

<title>AceHack-Limiting 'likes' sent anonymously - Part 3</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<!-- {{ with .Site.Params.author }}<meta name="author" content="{{ . }}">{{ end }} -->
<!-- {{ with .Description }} -->
<!--   <meta name="description" content="{{ . }}"> -->
<!-- {{ else }} -->
<!--   <meta name="description" content="{{ .Site.Params.site_description }}"> -->
<!-- {{ end }} -->
<!-- {{ with .RSSLink }} -->
<!--   <link href="{{ . }}" rel="alternate" type="application/rss+xml" title="{{ Site.Title }}" /> -->
<!--   <link href="{{ . }}" rel="feed" type="application/rss+xml" title="{{ Site.Title }}" /> -->
<!-- {{ end }} -->

<meta name="author" content="Saksham Sharma">
<meta name="keywords" content="acehack, coding, programming, linux, webdev, hakyll">

<!-- <link rel="canonical" href="{{ .Permalink }}"/> -->
<link rel="icon" href="../../../favicon.ico">
<link rel="apple-touch-icon" href="../../../apple-touch-icon.png" />
<link rel="stylesheet" href="../../../css/style.css">
<link rel="stylesheet" href="../../../css/font-awesome.min.css">
<link rel="stylesheet" href="../../../css/monokai.css">
<link rel="stylesheet" href="../../../fancybox/jquery.fancybox.css">
<!-- ------------- -->
<!-- FIX IMPORTANT -->
<!-- ------------- -->
<!-- {{ range .Site.Params.custom_css }} -->
<!-- <link rel="stylesheet" href="{{ . | absURL }}"> -->
<!-- {{ end }} -->

<link href="https://fonts.googleapis.com/css?family=Open+Sans:400italic,400,600" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">

<!-- {{ template "_internal/opengraph.html" . }} -->
<!-- {{ template "_internal/google_news.html" . }} -->
<!-- {{ template "_internal/schema.html" . }} -->
<!-- {{ template "_internal/twitter_cards.html" . }} -->



<!-- {{ if .Params.disable_profile | and .Params.disable_widgets }} -->
<!-- <style> -->
<!--     .full-width { -->
<!--         width: 100% !important; -->
<!--     } -->
<!-- </style> -->
<!-- {{ end }} -->

<!-- needs to be loaded first for following scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

  </head>
  <body>
    <header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="https://sakshamsharma.com" id="logo">
          <!-- {{ if .Site.Params.logo }} -->
          <i class="logo" style="background-image: url('/images/logo.png')"></i>
          <!-- {{end}} -->
          <span class="site-title">AceHack</span>
      </a>
      <nav id="main-nav">
        <a class="main-nav-link" href="../../../">Home</a>
        <a class="main-nav-link" href="../../../about">About</a>
        
        <a class="main-nav-link" href="https://github.com/sakshamsharma">GitHub</a>
        
        <a class="main-nav-link" href="https://in.linkedin.com/in/saksham-sharma">LinkedIn</a>
        
        <a class="main-nav-link" href="../../../cv">Resume</a>
        
        <a class="main-nav-link" href="../../../rss.xml">Rss</a>
        
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
          <input type="search" name="q" class="search-form-input" placeholder="Search">
          <button type="submit" class="search-form-submit">
          </button>
          <input type="hidden" name="sitesearch" value="sakshamsharma.com" />
        </form>
      </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tbody>
          <tr>
          <td><a class="main-nav-link" href="../../../">Home</a></td>
          <td><a class="main-nav-link" href="../../../about">About</a></td>
        <!--   {{ range .Site.Params.menu }} -->
        <!--   {{ if .before }} -->
        <!--   <td><a class="main-nav-link" href="{{ .link | absURL }}">{{ .label }}</a></td> -->
        <!--   {{ end }} -->
        <!--   {{ end }} -->

        <!--   {{ range .Site.Menus.main }} -->
        <!--   <td><a class="main-nav-link" href="{{ .URL }}">{{ .Name }}</a></td> -->
        <!--   {{ end }} -->

        <!--   {{ range .Site.Params.menu }} -->
        <!--   {{ if not .before }} -->
        <!--   <td><a class="main-nav-link" href="{{ .link  | absURL }}">{{ .label }}</a></td> -->
        <!--   {{ end }} -->
        <!--   {{ end }} -->
          <td>
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
          <input type="search" name="q" class="search-form-input" placeholder="Search">
          <input type="hidden" name="sitesearch" value="{{ .Site.BaseURL }}" />
          </form>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</header>

    <div class="container">
      <div class="outer">
        <section id="widemain">
  <article id="page-undefined" class="article article-type-page" itemscope itemprop="blogPost">
    <div class="article-inner">
        <!-- {{ if and (isset .Params "banner") (not (eq .Params.banner "")) }} -->
        <!--     <img src="{{ .Params.banner | absURL }}" class="article-banner"> -->
        <!-- {{ end }} -->

        <header class="article-header">
  <a href="../../../2016/12/puppy3/index.html">
    <h1 class="article-title" itemprop="name">Limiting 'likes' sent anonymously - Part 3</h1>
  </a>
  <div class="article-meta">
    <!-- {{ if not .Params.nodateline }} -->
    <!-- <div class="article-date"> -->
    <!--   <i class="fa fa-calendar"></i> -->
    <!--   <time datetime="{{ .Date }}" itemprop="datePublished">{{ .Date.Format .Site.Params.date_format }}</time> -->
    <!--   &middot; -->
    <!--   {{ .WordCount }} -->
    <!--   {{ with .Site.Data.l10n.articles.words }}{{.}}{{end}} -->
    <!--   &middot; -->
    <!--   {{ .ReadingTime }} -->
    <!--   {{ with .Site.Data.l10n.articles.readingtime }}{{.}}{{end}} -->
    <!-- </div> -->
    <!-- {{ end }} -->
    <!-- {{ if isset .Params "categories" }} -->
    <!-- {{ categoriesLen := len .Params.categories }} -->
    <!-- {{ if gt categoriesLen 0 }} -->
    
    <div class="article-category">
      <i class="fa fa-folder"></i>
      project
    </div>
    
    <!-- {{ end }} -->
    <!-- {{ end }} -->

    <!-- {{ if isset .Params "tags" }} -->
    <!-- {{ tagsLen := len .Params.tags }} -->
    <!-- {{ if gt tagsLen 0 }} -->
    
    <div class="article-category">
      <i class="fa fa-tags"></i>
      algorithm, crypto, puppy
    </div>
    
    <!-- {{ end }} -->
    <!-- {{ end }} -->
  </div>
</header>

        <div class="article-entry" itemprop="articleBody">
          <!-- <script type="text/x-mathjax-config"> -->
<!-- MathJax.Hub.Config({ -->
<!--   tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]} -->
<!-- }); -->
<!-- </script> -->
<!-- <script type="text/javascript" async -->
<!--   src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"> -->
<!-- </script> -->
<h3 id="recap">Recap</h3>
<p>For those who haven’t read the previous posts <a href="../../../2016/10/puppy1/">part 1</a> and <a href="../../../2016/11/puppy2/">part 2</a>, this is a challenge which came up while trying to develop a secure version of a platform called <em>Puppy Love</em><!--more-->. The introduction and the algorithmic challenge, taken from the previous 2 articles:</p>
<p>The queerly named <em>Puppy Love</em> platform has been running in my university since 2014, meant to help shy nerds meet their crush, made my the Programming Club (of which, I happen to be the current coordinator). The platform opens 1 week prior to the Valentine’s Day every year, and let’s people choose up to 4 of their crushes, encrypting their choices with their password. At the stroke of the midnight hour, everyone logs back, and their choices are decrypted, and are then matched to other people’s choices. Only the people who matched are informed about it. If your <em>love</em> was unrequited (the other person didn’t like you), you will not get to know. More importantly, if you did not like the other person, you would not know if that person liked you or not.</p>
<h3 id="limiting-your-likes-the-challenge">Limiting your likes: The challenge</h3>
<p>In part 2, we ensured that the server would not get to know the individual choices of the users, and would only know if both of the parties <em>matched</em>. There still exists, an issue with this. Since the server has no idea about your choices, it cannot prevent you from sending a <em>like</em> to everyone you know. Theoretically, you could send one to everyone, and basically find out who likes you. Of course, this comes with the additional baggage of having to explain to the person that you actually cheated and do not like them back.</p>
<p>Interestingly, while solving this issue, I ended up with a solution which reduced the compution and data needed by almost half. The solution used to restrict choices to 4 will also let the server match people.</p>
<h3 id="updated-algorithm">Updated algorithm:</h3>
<p>Here is a possible solution to this challenge. To explain that, I shall go over the needed part of the algorithm (taken from Part 2):</p>
<ul>
<li>Both parties have public and private key pairs.</li>
<li>Each party sends a random token to the other party (call these strings <em>t0</em> and <em>t1</em>).</li>
<li>The server will not know the these values due to asymmetric encryption.</li>
</ul>
<p>When the user wants to submit, he/she will look at each of his/her choices, and fetch the corresponding token values. Let them be <em>t0</em> and <em>t1</em>. Now, the user will send the value of <code>hash(t0-t1)</code> to the server (it can be any non-invertible function of the tokens). The user can send up to 4 such values to the server (can be checked on the backend).</p>
<p>In case 2 people like each other, the values they send will be exactly the same (because the ordering of t0 and t1 is decided by their roll numbers). The server can simply sort the list in the end, and inform all people whose values matched. The matching is accomplished!</p>
<p>The server will not find out your choices if there was no match. Profit.</p>
<h4 id="the-old-algorithm-for-this-deprecated">The old algorithm for this (deprecated)</h4>
<p><strong>Note</strong>: This section is very similar to the above, but contains steps not needed anymore.</p>
<p>Here is a possible solution to this challenge. To explain that, I shall go over the needed part of the algorithm (taken from Part 2):</p>
<ul>
<li>Both parties have shared secret values A and B. These are not known to Eve by virtue of public key encryption.</li>
<li>Parties agree to this protocol:</li>
<li>Alice sends value <code>a = A</code> to Eve if she likes Bob.</li>
<li>Alice sends value <code>a = random</code> to Eve if she does not like Bob.</li>
<li>Bob sends value <code>b = B</code> to Eve if he likes Alice.</li>
<li>Bob sends value <code>b = random</code> to Eve if he does not like Alice.</li>
<li>Eve receives <code>a</code> and <code>b</code>. She stores <code>hash(a*b)</code> as result.</li>
<li>Alice and Bob manually compute <code>hash(A * B)</code>, and send it to server (server can verify malicious behavior if they don’t match)</li>
<li>It is a match only if the result and the expected value by both parties are the same.</li>
</ul>
<p>Note here, that the server shall not find out more than one of A, B if the two parties did not match. But if they match, this would be a cue for the server that there was a match. Now, this is a good point to ensure that both the users did not send more than 4 likes, and this match, indeed, was expected. Here is a sketch of how this could be done:</p>
<ul>
<li>Once you finalize your choices, you need to inform the server about them in a way that it cannot find out unless that choice actually matched.</li>
<li>If your likes are <em>m1</em>, <em>m2</em>, <em>m3</em> and <em>m4</em>, assume that the negotiated values <code>A</code> and <code>B</code> are: <em>A1</em>, <em>B1</em> and so on.</li>
<li>You send the value <code>AES_enc('m1')</code> encrypted with a password <code>A1-password-B1</code> or some other function of both <code>A1</code> and <code>B1</code>.</li>
<li>The server shall accept only 4 of such terms.</li>
<li>When the server detects a match, it shall look up in the list of terms you sent, and try decrypting them, to ensure that this particular match was among the 4 you had expected. It should ideally find exactly one term which gets decrypted.</li>
<li>If there is a match which was not intended, it is simply dropped.</li>
</ul>
<p>This way, only 4 of your likes can actually result in matches. The server still cannot detect your choices. Profit <code>:)</code></p>
        </div>
        <!-- partial("templates/partials/article_footer.html") -->
    </div>

    <!-- {{ partial "prev_next_post" . }} -->
</article>

<script src="../../../js/fb.js"></script>
<div class="fb-like" data-share="true" data-width="450" data-show-faces="true">
</div>

<script id="dsq-count-scr" src="//acehack.disqus.com/count.js" async></script>

<div id="disqus_thread"></div>
<script>
 // For debugging
 var disqus_developer = 1;
 var disqus_shortname = 'acehack';
 var disqus_config = function () {
     this.page.url = 'http://acehack.org/2016/12/puppy3/index.html';
     this.page.identifier = 'puppy-3';
     this.page.title = 'Limiting 'likes' sent anonymously - Part 3';
 };
 (function() {
     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
     dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
 })();
 (function () {
     var s = document.createElement('script'); s.async = true;
     s.type = 'text/javascript';
     s.src = '//' + disqus_shortname + '.disqus.com/count.js';
     (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
 }());
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

</section>

<aside id="sidebar">
    <!-- {{ if .Site.Params.widgets.recent_articles }} -->
<div class="widget-wrap">
    <h3 class="widget-title">
        <!-- {{with .Site.Data.l10n.widgets.recent_articles.title}}{{.}}{{end}} -->
        Recents
    </h3>
    <div class="widget">
        <ul id="recent-post">
            <!-- {{ range first 5 (where .Site.RegularPages "Type" "post") }} -->
            
            <li>
                <div class="item-thumbnail">
                    <a href class="thumbnail">
                    <!-- {{ if and (isset .Params "banner") (not (eq .Params.banner "")) }} -->
                    <!--     <span style="background-image:url({{ .Params.banner | absURL }})" alt="{{ .Title }}" class="thumbnail-image"></span> -->
                    <!-- {{else}} -->
                        <span class="thumbnail-image thumbnail-none"></span>
                    <!-- {{ end }} -->
                    </a>
                </div>
                <div class="item-inner">
                    <!-- {{ if isset .Params "categories" }} -->
                    <!-- {{ if gt (len .Params.categories) 0 }} -->
                    <!-- <p class="item-category"> -->
                    <!--     {{ url := printf "%s/%s" "categories" (index .Params.categories 0 | urlize | lower)}} -->
                    <!--     <a class="article-category-link" href="{{ url | absURL }}"> -->
                    <!--     {{ index .Params.categories 0 }} -->
                    <!--     </a> -->
                    <!-- </p> -->
                    <!-- {{ end }} -->
                    <!-- {{ end }} -->
                    <p class="item-title"><a href class="title">Interning at Google Seattle</a></p>
                    <p class="item-date">
                        <time datetime="August  5, 2017" itemprop="datePublished">August  5, 2017</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href class="thumbnail">
                    <!-- {{ if and (isset .Params "banner") (not (eq .Params.banner "")) }} -->
                    <!--     <span style="background-image:url({{ .Params.banner | absURL }})" alt="{{ .Title }}" class="thumbnail-image"></span> -->
                    <!-- {{else}} -->
                        <span class="thumbnail-image thumbnail-none"></span>
                    <!-- {{ end }} -->
                    </a>
                </div>
                <div class="item-inner">
                    <!-- {{ if isset .Params "categories" }} -->
                    <!-- {{ if gt (len .Params.categories) 0 }} -->
                    <!-- <p class="item-category"> -->
                    <!--     {{ url := printf "%s/%s" "categories" (index .Params.categories 0 | urlize | lower)}} -->
                    <!--     <a class="article-category-link" href="{{ url | absURL }}"> -->
                    <!--     {{ index .Params.categories 0 }} -->
                    <!--     </a> -->
                    <!-- </p> -->
                    <!-- {{ end }} -->
                    <!-- {{ end }} -->
                    <p class="item-title"><a href class="title">Limiting 'likes' sent anonymously - Part 3</a></p>
                    <p class="item-date">
                        <time datetime="December 26, 2016" itemprop="datePublished">December 26, 2016</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href class="thumbnail">
                    <!-- {{ if and (isset .Params "banner") (not (eq .Params.banner "")) }} -->
                    <!--     <span style="background-image:url({{ .Params.banner | absURL }})" alt="{{ .Title }}" class="thumbnail-image"></span> -->
                    <!-- {{else}} -->
                        <span class="thumbnail-image thumbnail-none"></span>
                    <!-- {{ end }} -->
                    </a>
                </div>
                <div class="item-inner">
                    <!-- {{ if isset .Params "categories" }} -->
                    <!-- {{ if gt (len .Params.categories) 0 }} -->
                    <!-- <p class="item-category"> -->
                    <!--     {{ url := printf "%s/%s" "categories" (index .Params.categories 0 | urlize | lower)}} -->
                    <!--     <a class="article-category-link" href="{{ url | absURL }}"> -->
                    <!--     {{ index .Params.categories 0 }} -->
                    <!--     </a> -->
                    <!-- </p> -->
                    <!-- {{ end }} -->
                    <!-- {{ end }} -->
                    <p class="item-title"><a href class="title">My internship interview saga</a></p>
                    <p class="item-date">
                        <time datetime="December 21, 2016" itemprop="datePublished">December 21, 2016</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href class="thumbnail">
                    <!-- {{ if and (isset .Params "banner") (not (eq .Params.banner "")) }} -->
                    <!--     <span style="background-image:url({{ .Params.banner | absURL }})" alt="{{ .Title }}" class="thumbnail-image"></span> -->
                    <!-- {{else}} -->
                        <span class="thumbnail-image thumbnail-none"></span>
                    <!-- {{ end }} -->
                    </a>
                </div>
                <div class="item-inner">
                    <!-- {{ if isset .Params "categories" }} -->
                    <!-- {{ if gt (len .Params.categories) 0 }} -->
                    <!-- <p class="item-category"> -->
                    <!--     {{ url := printf "%s/%s" "categories" (index .Params.categories 0 | urlize | lower)}} -->
                    <!--     <a class="article-category-link" href="{{ url | absURL }}"> -->
                    <!--     {{ index .Params.categories 0 }} -->
                    <!--     </a> -->
                    <!-- </p> -->
                    <!-- {{ end }} -->
                    <!-- {{ end }} -->
                    <p class="item-title"><a href class="title">Coding software-based mutex algos for fun</a></p>
                    <p class="item-date">
                        <time datetime="December  2, 2016" itemprop="datePublished">December  2, 2016</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href class="thumbnail">
                    <!-- {{ if and (isset .Params "banner") (not (eq .Params.banner "")) }} -->
                    <!--     <span style="background-image:url({{ .Params.banner | absURL }})" alt="{{ .Title }}" class="thumbnail-image"></span> -->
                    <!-- {{else}} -->
                        <span class="thumbnail-image thumbnail-none"></span>
                    <!-- {{ end }} -->
                    </a>
                </div>
                <div class="item-inner">
                    <!-- {{ if isset .Params "categories" }} -->
                    <!-- {{ if gt (len .Params.categories) 0 }} -->
                    <!-- <p class="item-category"> -->
                    <!--     {{ url := printf "%s/%s" "categories" (index .Params.categories 0 | urlize | lower)}} -->
                    <!--     <a class="article-category-link" href="{{ url | absURL }}"> -->
                    <!--     {{ index .Params.categories 0 }} -->
                    <!--     </a> -->
                    <!-- </p> -->
                    <!-- {{ end }} -->
                    <!-- {{ end }} -->
                    <p class="item-title"><a href class="title">Zero-trust - Safe and anonymous ANDing bits - Part 2</a></p>
                    <p class="item-date">
                        <time datetime="November 25, 2016" itemprop="datePublished">November 25, 2016</time>
                    </p>
                </div>
            </li>
            
            <!-- {{ end }} -->
        </ul>
    </div>
</div>
<!-- {{ end }} -->

    <!-- {{ partial "widgets/categories" . }} -->
    <!-- {{ partial "widgets/tags" . }} -->
    <!-- {{ partial "widgets/tag_cloud" . }} -->

    <div id="toTop" class="fa fa-angle-up"></div>
</aside>


      </div>
    </div>
    <footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      Saksham Sharma
      <!-- &copy; {{ now.Format "2006"}} -->
      <!-- {{ with .Site.Params.copyright }}{{ . | markdownify}}{{ end }} -->
    </div>
  </div>
</footer>

<!-- {{ partial "footer_js" . }} -->
<!-- {{ partial "footer_custom_js" . }} -->
  </body>
</html>
