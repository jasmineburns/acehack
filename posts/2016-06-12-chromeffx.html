<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="The blog of Saksham Sharma">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>AceHack - Chrome and Firefox resource usage experiment</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,large&amp;lang=en">
    <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.grey-pink.min.css" />
    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="stylesheet" href="../css/footer.css" />

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="../js/fb.js"></script>
  </head>
  <body>

    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <header class="mdl-layout__header mdl-layout__header--scroll portfolio-header">
        <div class="mdl-layout__header-row portfolio-logo-row">
          <span class="mdl-layout__title">
            <a href="../">
              <div class="portfolio-logo"></div>
            </a>
            <span class="mdl-layout__title">The blog of Saksham Sharma</span>
          </span>
        </div>
        <div class="mdl-layout__header-row portfolio-navigation-row mdl-layout--large-screen-only">
          <nav class="mdl-navigation mdl-typography--body-1-force-preferred-font">
            <a class="mdl-navigation__link mynav" href="../index.html">Home</a>
            <a class="mdl-navigation__link mynav" href="../archive.html">Blog</a>
            <a class="mdl-navigation__link mynav" href="../about.html">About</a>
          </nav>
        </div>
      </header>
      <div class="mdl-layout__drawer mdl-layout--small-screen-only">
        <nav class="mdl-navigation mdl-typography--body-1-force-preferred-font">
          <a class="mdl-navigation__link mynav" href="../index.html">Home</a>
          <a class="mdl-navigation__link mynav" href="../archive.html">Blog</a>
          <a class="mdl-navigation__link mynav" href="../about.html">About</a>
        </nav>
      </div>
      <main class="mdl-layout__content">
        <div class="con-body">
          <div class="mdl-grid">
  <div class="mdl-cell mdl-cell--3-col"></div>
  <div class="mdl-cell mdl-cell--6-col mdl-cell--4-cell-phonemdl-card mdl-shadow--4dp">
    <div class="mdl-card__title">
      <h1 class="mdl-card__title-text" style="font-size: 2.5em;">Chrome and Firefox resource usage experiment</h1>
    </div>
    
    <div class="mdl-card__media">
      <img class="article-image" src="http://media2.giga.de/2015/05/chrome-vs-firefox2-rcm992x0.jpg" border="0" alt>
    </div>
    
    <div class="mdl-card__supporting-text">
      <strong>Written on: </strong> June 12, 2016
      <strong>by</strong> Saksham Sharma 
      <br><strong>Tags: </strong> <a href="../tags/technical.html">technical</a>, <a href="../tags/browser.html">browser</a>, <a href="../tags/experiment.html">experiment</a> <br>
    </div>
    <div class="mdl-grid portfolio-copy" style="max-width: 95%;">
      <div class="mdl-cell mdl-cell--12-col mdl-cell--4-col-phone mdl-card__supporting-text no-padding">
        <div class="con-body">
          <h2 id="browser-war">Browser WAR!</h2>
<p>Why bother fighting over features in browsers when you can decide using some hard facts?</p>
<p>I had recently managed to make Firefox work for me (it still isn’t as fluid as Chrome, but is now close, thanks to using the beta version which has e10s support). Still confused about whether its really better than Chrome, I decided to put them to the test!</p>
<h2 id="results-first-because..-well.">Results first, because.. well.</h2>
<p>Since majority would come here for the results, well…</p>
<p><strong><em>drum roll</em></strong></p>
<p>Firefox wins <em>hands down</em> here. Personally, this was not a surprise.</p>
<p>Chrome was always know to be a RAM hog, but it also seems to have a huge lot more power usage as compared to Firefox as well.</p>
<p><strong>Update</strong> I’m back to Chrome these days. I noticed it works much more smoother, and hangs much less often.</p>
<h3 id="ram">RAM</h3>
<p>Not a new thing, but yes, Firefox uses lower RAM than Chrome <em>consistently</em>. For description of the actions during the course of the benchmark, look at the next section.</p>
<p><img src="../images/articles/ram-plot.png" style="width: 95%; height: auto;" /></p>
<blockquote>
<p>Don’t laugh at the plot :P</p>
<p>Also, the higher one is Chrome, although it’s not apparent.</p>
<p>Bad gnuplot skills ^</p>
</blockquote>
<h3 id="power">Power</h3>
<p>I measured the power output of my laptop’s battery while doing various actions on both browsers, and Firefox again demonstrates much lower usage. Really good for people who keep running out of battery and complain they cannot figure out the reason (Yes, I’m also talking about myself). Firefox, good job there!</p>
<p><img src="../images/articles/power-plot.png" style="width: 95%; height: auto;" /></p>
<h2 id="the-experiment">The experiment</h2>
<p>I designed a casual benchmark for testing the browsers’ resource usage.</p>
<p>Here’s the timeline of the benchmark:</p>
<table>
<thead>
<tr class="header">
<th align="center">Start Time</th>
<th align="center">Duration of step</th>
<th align="left">Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0 seconds</td>
<td align="center">25 seconds</td>
<td align="left">Startup of browser</td>
</tr>
<tr class="even">
<td align="center">25 seconds</td>
<td align="center">20 seconds</td>
<td align="left">Open Viva La Vida video on Youtube</td>
</tr>
<tr class="odd">
<td align="center">45 seconds</td>
<td align="center">20 seconds</td>
<td align="left">Open Instant Crush video on Youtube in a new tab</td>
</tr>
<tr class="even">
<td align="center">65 seconds</td>
<td align="center">20 seconds</td>
<td align="left">Open The Scientist video on Youtube in a new tab</td>
</tr>
<tr class="odd">
<td align="center">85 seconds</td>
<td align="center">20 seconds</td>
<td align="left">Open Facebook in a new tab</td>
</tr>
<tr class="even">
<td align="center">105 seconds</td>
<td align="center">20 seconds</td>
<td align="left">Close all tabs but keep browser open</td>
</tr>
</tbody>
</table>
<p><strong>NOTE</strong> All videos were running simultaneously by 85 seconds. No tab was closed prior to 105 seconds.</p>
<p>I executed these exact actions on both browsers, taking care to start with exactly the same conditions in both experiments.</p>
<p>Things done to ensure a clean test environment:</p>
<ul>
<li>A fresh boot in both cases.</li>
<li>No other applications were running, except the light weight window manager (XMonad) and core services.</li>
<li>Browser was not loaded any time before the start of the test.</li>
<li>The battery level (95%) and the battery usage rate (power) were same before the start in both cases.</li>
<li>All plugins (except ad-blocker) were disabled in both browsers prior to the start of the experiment.</li>
<li>The browsers used were the publicly available binaries, not custom compiled.</li>
<li>Both browsers did not use dedicated GPU for any purpose (nvidia module was not loaded).</li>
<li>Yes, both browsers had the same volume set on system as well as Youtube.</li>
</ul>
<p><strong>NOTE</strong> I left ad-blocker running in both the browsers since Ads would just introduce variability and delays in video starts.</p>
<p>Here are the links used for the experiment:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=dvgZkm1xWPE">Viva La Vida</a></li>
<li><a href="https://www.youtube.com/watch?v=a5uQMwRMHcs">Instant Crush</a></li>
<li><a href="https://www.youtube.com/watch?v=RB-RcX5DS5A">The Scientist</a></li>
</ul>
<p>The experiments were conducted on a Lenovo Y50-70 with a 4 cell (and dismal) battery, 8 GB RAM, and an i7 4705HQ Processor.</p>
<h2 id="scripts-used">Scripts used</h2>
<h4 id="data-recording">Data recording</h4>
<p>Here is the script used to record the data. Feel free to test it on yours as well.</p>
<pre class="shell"><code>#!/bin/bash

if [ -z &quot;$1&quot; ]
then
    echo &quot;CUSTOM MESSAGE&quot;
    echo &quot;Arguement not supplied&quot;
    echo &quot;Usage: ./test.sh &lt;file_1&gt; &lt;file_2&quot;
    exit
fi

for i in {1..125}
do
  echo $i
  power=$(cat /sys/class/power_supply/BAT1/power_now)
  ramFree=$(cat /proc/meminfo | grep 'MemFree:\ *[0-9]*' | grep '[0-9]*' -o)
  ramAvail=$(cat /proc/meminfo | grep 'MemAvailable:\ *[0-9]*' | grep '[0-9]*' -o)
  ramUsed=$(($ramAvail - $ramFree))
  echo &quot;Power: $power&quot;
  echo &quot;RAM: $ramUsed&quot;
  printf &quot;%s, %s\n&quot; &quot;$i&quot; &quot;$power&quot; &gt;&gt; &quot;$1-power&quot;
  printf &quot;%s, %s\n&quot; &quot;$i&quot; &quot;$ramUsed&quot; &gt;&gt; &quot;$1-ram&quot;
  sleep 1
done</code></pre>
<h4 id="data-format">Data format</h4>
<p>The output data files were of the format:</p>
<pre><code>&lt;time&gt;, &lt;ram_used&gt;
&lt;time2&gt;, &lt;ram_used2&gt;</code></pre>
<h4 id="plotting-script">Plotting script</h4>
<p>The (below-par) script used for plotting the plots is here. It takes as argument the 2 files (like: chrome-ram and firefox-ram).</p>
<pre class="shell"><code>#!/bin/bash

if [ $# -eq 0 ]; then
    echo &quot;No file to be plotted&quot;
    exit 1
fi

metric=$(echo $1 | grep '\-.*' -o)
metric=${metric:1}
echo $metric

# Have to pipe to gnuplot via cat otherwise it does not pause
(cat &lt;&lt; EOF
set title &quot;Plot of $metric in Chrome 51 vs Firefox 48&quot;
set term png
set output &quot;$metric-plot.png&quot;
set ylabel &quot;$metric&quot;
set xlabel &quot;Time (seconds)&quot;
set autoscale

set style data histogram
set style histogram gap 1
set style fill solid border -1
set boxwidth 1

set datafile separator &quot;,&quot;
set arrow from 25, graph 0 to 25, graph 1 nohead
set arrow from 45, graph 0 to 45, graph 1 nohead
set arrow from 65, graph 0 to 65, graph 1 nohead
set arrow from 85, graph 0 to 85, graph 1 nohead
set arrow from 105, graph 0 to 105, graph 1 nohead
plot '$1' using 2, '$2' using 2
pause -1 &quot;Press Ctrl+D to exit&quot;
EOF
cat /dev/tty) | gnuplot</code></pre>
        </div>
        <div class="fb-like" data-share="true" data-width="450" data-show-faces="true">
        </div>
        <!-- <div -->
        <!--   class="fb-comments" -->
        <!--   data-href="http://www.acehack.org/posts/2016-06-12-chromeffx.html" -->
        <!--   data-numposts="20" -->
        <!--   data-width="100%"> -->
        <!-- </div> -->

        <script id="dsq-count-scr" src="//acehack.disqus.com/count.js" async></script>

        <div id="disqus_thread"></div>
        <script>
          // For debugging
          var disqus_developer = 1;
          var disqus_shortname = 'acehack';
          var disqus_config = function () {
          this.page.url = 'http://acehack.org/posts/2016-06-12-chromeffx.html';
          this.page.identifier = 'chrome-vs-ffx';
          this.page.title = 'Chrome and Firefox resource usage experiment';
          };
          (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
          (function () {
          var s = document.createElement('script'); s.async = true;
          s.type = 'text/javascript';
          s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
          (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
          }());
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


      </div>
    </div>
  </div>

</div>

        </div>
      <footer class="mdl-mini-footer">
        <div class="mdl-mini-footer__left-section">
          <div class="mdl-logo">
            <h5 style="color: #bbbbbb; margin: 0; padding: 0;">AceHack</h5>
            <p style="color: #aaaaaa; margin: 0; margin-top: 5px; padding: 0;">The blog of Saksham Sharma</p>
            <p style="color: #aaaaaa; margin: 0; margin-top: 5px; padding: 0;">Hosted on Github <a href="https://github.com/sakshamsharma/acehack" target="_blank">here</a><p>
          </div>
        </div>
        <div class="mdl-mini-footer__middle-section">
          <div class="mdl-logo" style="text-align: right;">
            <a href="https://github.com/sakshamsharma" target="_blank">sakshamsharma</a>@github<br>
            <a href="mailto:saksham@acehack.org" target="_blank">saksham@acehack.com</a>
          </div>
        </div>
        <div class="mdl-mini-footer__right-section">
          <div class="mdl-logo">Proudly generated by Hakyll</div>
        </div>
      </footer>
      </main>
    </div>
    <script src="https://code.getmdl.io/1.1.3/material.min.js"></script>
    <script>
var links = document.getElementsByClassName('mynav');
for(i=0;i<links.length;i++) {
  var tmp = links[i].href;
  if (tmp.substring(tmp.lastIndexOf('/')) == document.location.pathname) {
    links[i].className += " is-active"
  }
}
    </script>
  </body>
</html>
