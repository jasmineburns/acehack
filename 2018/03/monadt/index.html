<!DOCTYPE html>
<html lang="en-us">
  <head>
    <!-- <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} &middot; {{ .Site.Title }}{{ end }}</title> -->
<!-- {{ .Hugo.Generator }} -->

<title>AceHack-Practical Monad Transformers</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<!-- {{ with .Site.Params.author }}<meta name="author" content="{{ . }}">{{ end }} -->
<!-- {{ with .Description }} -->
<!--   <meta name="description" content="{{ . }}"> -->
<!-- {{ else }} -->
<!--   <meta name="description" content="{{ .Site.Params.site_description }}"> -->
<!-- {{ end }} -->
<!-- {{ with .RSSLink }} -->
<!--   <link href="{{ . }}" rel="alternate" type="application/rss+xml" title="{{ Site.Title }}" /> -->
<!--   <link href="{{ . }}" rel="feed" type="application/rss+xml" title="{{ Site.Title }}" /> -->
<!-- {{ end }} -->

<meta name="author" content="Saksham Sharma">
<meta name="keywords" content="acehack, coding, programming, linux, webdev, hakyll">

<!-- <link rel="canonical" href="{{ .Permalink }}"/> -->
<link rel="icon" href="../../../favicon.ico">
<link rel="apple-touch-icon" href="../../../apple-touch-icon.png" />
<link rel="stylesheet" href="../../../css/style.css">
<link rel="stylesheet" href="../../../css/font-awesome.min.css">
<link rel="stylesheet" href="../../../css/monokai.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-light.min.css">
<!-- ------------- -->
<!-- FIX IMPORTANT -->
<!-- ------------- -->
<!-- {{ range .Site.Params.custom_css }} -->
<!-- <link rel="stylesheet" href="{{ . | absURL }}"> -->
<!-- {{ end }} -->

<script src="../../../js/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400italic,400,600" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">

<!-- {{ template "_internal/opengraph.html" . }} -->
<!-- {{ template "_internal/google_news.html" . }} -->
<!-- {{ template "_internal/schema.html" . }} -->
<!-- {{ template "_internal/twitter_cards.html" . }} -->



<!-- {{ if .Params.disable_profile | and .Params.disable_widgets }} -->
<!-- <style> -->
<!--     .full-width { -->
<!--         width: 100% !important; -->
<!--     } -->
<!-- </style> -->
<!-- {{ end }} -->

<!-- needs to be loaded first for following scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

    <script>
      var loc = window.location.href+'';
      if ((loc.indexOf('http://')==0 && loc.indexOf('localhost') == -1) {
        window.location.href = loc.replace('http://','https://');
      }
    </script>
  </head>
  <body>
    <header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="https://sakshamsharma.com" id="logo">
          <!-- {{ if .Site.Params.logo }} -->
          <i class="logo" style="background-image: url('/images/logo.png')"></i>
          <!-- {{end}} -->
          <span class="site-title">AceHack</span>
      </a>
      <nav id="main-nav">
        <a class="main-nav-link" href="../../../">Home</a>
        <a class="main-nav-link" href="../../../about">About</a>
        
        <a class="main-nav-link" href="https://github.com/sakshamsharma">GitHub</a>
        
        <a class="main-nav-link" href="https://in.linkedin.com/in/saksham-sharma">LinkedIn</a>
        
        <a class="main-nav-link" href="../../../cv">Resume</a>
        
        <a class="main-nav-link" href="../../../rss.xml">RSS</a>
        
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
          <input type="search" name="q" class="search-form-input" placeholder="Search">
          <button type="submit" class="search-form-submit">
          </button>
          <input type="hidden" name="sitesearch" value="sakshamsharma.com" />
        </form>
      </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tbody>
          <tr>
          <td><a class="main-nav-link" href="../../../">Home</a></td>
          <td><a class="main-nav-link" href="../../../about">About</a></td>
        <!--   {{ range .Site.Params.menu }} -->
        <!--   {{ if .before }} -->
        <!--   <td><a class="main-nav-link" href="{{ .link | absURL }}">{{ .label }}</a></td> -->
        <!--   {{ end }} -->
        <!--   {{ end }} -->

        <!--   {{ range .Site.Menus.main }} -->
        <!--   <td><a class="main-nav-link" href="{{ .URL }}">{{ .Name }}</a></td> -->
        <!--   {{ end }} -->

        <!--   {{ range .Site.Params.menu }} -->
        <!--   {{ if not .before }} -->
        <!--   <td><a class="main-nav-link" href="{{ .link  | absURL }}">{{ .label }}</a></td> -->
        <!--   {{ end }} -->
        <!--   {{ end }} -->
          <td>
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
          <input type="search" name="q" class="search-form-input" placeholder="Search">
          <input type="hidden" name="sitesearch" value="{{ .Site.BaseURL }}" />
          </form>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</header>

    <div class="container">
      <div class="outer">

        

        <section id="widemain">
          <article id="page-undefined" class="article article-type-page" itemscope itemprop="blogPost">
    <div class="article-inner">
        <!-- {{ if and (isset .Params "banner") (not (eq .Params.banner "")) }} -->
        <!--     <img src="{{ .Params.banner | absURL }}" class="article-banner"> -->
        <!-- {{ end }} -->

        <header class="article-header">
  <a href="../../../2018/03/monadt/index.html">
    <h1 class="article-title" itemprop="name">Practical Monad Transformers</h1>
  </a>
  <div class="article-meta">
    <!-- {{ if not .Params.nodateline }} -->
    <!-- <div class="article-date"> -->
    <!--   <i class="fa fa-calendar"></i> -->
    <!--   <time datetime="{{ .Date }}" itemprop="datePublished">{{ .Date.Format .Site.Params.date_format }}</time> -->
    <!--   &middot; -->
    <!--   {{ .WordCount }} -->
    <!--   {{ with .Site.Data.l10n.articles.words }}{{.}}{{end}} -->
    <!--   &middot; -->
    <!--   {{ .ReadingTime }} -->
    <!--   {{ with .Site.Data.l10n.articles.readingtime }}{{.}}{{end}} -->
    <!-- </div> -->
    <!-- {{ end }} -->
    <!-- {{ if isset .Params "categories" }} -->
    <!-- {{ categoriesLen := len .Params.categories }} -->
    <!-- {{ if gt categoriesLen 0 }} -->
    
    <div class="article-category">
      <i class="fa fa-folder"></i>
      programming
    </div>
    
    <!-- {{ end }} -->
    <!-- {{ end }} -->

    <!-- {{ if isset .Params "tags" }} -->
    <!-- {{ tagsLen := len .Params.tags }} -->
    <!-- {{ if gt tagsLen 0 }} -->
    
    <div class="article-category">
      <i class="fa fa-tags"></i>
      <a href="../../../tags/haskell.html">haskell</a>, <a href="../../../tags/monads.html">monads</a>, <a href="../../../tags/monad-transformers.html">monad-transformers</a>
    </div>
    

    <p style="float:right;">March 23, 2018</p>
    <!-- {{ end }} -->
    <!-- {{ end }} -->
  </div>
</header>

        <div class="article-entry" itemprop="articleBody">
          <h1 id="introduction">Introduction</h1>
<p>This post will attempt to convey some real-life examples and tricks, which may serve as a quick and dirty primer to monad transformers. In any real-life software written in Haskell or related languages, Monad Transformers are necessary, if you want to take advantage of the various non-IO monads available.</p>
<p>This post will draw heavily from my recent experience while implementing a blockchain protocol in Haskell.</p>
<!--more-->

<p>For a more in-depth approach, I would recommend <a href="http://book.realworldhaskell.org/read/monad-transformers.html">the chapter on Monad Transformers in Real World Haskell</a>.</p>
<p>To run the examples in this post, refer to the <a href="#subsechow-to-run">section at the end of this post</a>. You will also find a quick primer on monads at the end, in a section named <a href="#subsecmonads">monads</a>.</p>
<h1 id="introduction-to-monad-transformers">Introduction to Monad Transformers</h1>
<p>Consider the scenario where you are writing a software which:</p>
<ul>
<li>Interacts with the outside world (network, files, console)</li>
<li>Contains a state which modifies the interactions</li>
</ul>
<p>One would easily note that the State monad would be a useful monad to use here. But it does not allow IO actions, which seem to be necessary here too. Monad transformers allow you to combine multiple monad and use them together in the same <code>do</code> block.</p>
<p>Most of these monads transformers are available inside the <code>mtl</code> or the <code>transformers</code> packages.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="ot"># If you're using the mtl package</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="ot"># import Control.Monad.State.Lazy</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="ot"># If you're using the transformers package</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="ot"># We will use this in our examples.</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="kw">import</span> <span class="dt">Control.Monad.Trans.Class</span> (lift)</a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="kw">import</span> <span class="dt">Control.Monad.Trans.State.Lazy</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="ot">fxnWithStateAndIO ::</span> <span class="dt">StateT</span> <span class="dt">Int</span> <span class="dt">IO</span> <span class="dt">Int</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10">fxnWithStateAndIO <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11">  st <span class="ot">&lt;-</span> get</a>
<a class="sourceLine" id="cb1-12" data-line-number="12">  lift <span class="fu">$</span> putStrLn (<span class="st">&quot;State is &quot;</span> <span class="fu">++</span> show st)</a>
<a class="sourceLine" id="cb1-13" data-line-number="13">  return st</a></code></pre></div>
<p>Ignore the <code>lift</code> for now, and observe how, in a single <code>do</code> block, we are able to use the <code>get</code> function (which requires the State monad) and the <code>putStrLn</code> function which requires the IO monad. One could use any other monad in place of IO as well.</p>
<p>Basically, <code>StateT s m a</code> has three type parameters:</p>
<ul>
<li>s: The type of the state being carried</li>
<li>m: The underlying monad (IO, in the above example)</li>
<li>a: The type of the value returned from the computation</li>
</ul>
<p>For now, simply remember that when inside a Monad transformer’s <code>do</code> block, you can access functions of the top level monad (State here) as well as the underlying monad (IO here).</p>
<h2 id="running-these-monadic-computations">Running these monadic computations</h2>
<p>To get the result from a term of type <code>StateT s IO a</code>, you need to use <code>runStateT yourFxn initState</code>. This should be familiar if you have used the state monad.</p>
<p>To run the above in <code>ghci</code>, put it into a file, load it with <code>ghci &lt;file&gt;.hs</code> (ensure you have the <code>transformers</code> package available). The following command will run the computation:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb2-1" data-line-number="1">runStateT fxnWithStateAndIO <span class="dv">5</span></a></code></pre></div>
<p>Here, <code>5</code> is the initial state provided to the computation.</p>
<h2 id="lift">Lift?</h2>
<p>Remember how we used a <code>lift</code> to run the <code>putStrLn</code> command? <code>lift</code> is a function, which lets you, in our above example, convert an <code>IO ()</code> to a <code>StateT Int IO ()</code>. Think of it as, lifting an operation in one monad, to a monad which subsumes the first monad. If you look at <code>StateT Int IO a</code>, you can see that it subsumes IO. Thus, <code>lift</code> is suited for running <code>putStrLn</code>, <code>readLn</code> or any other IO action in this example.</p>
<p>Try to understand the following example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">import</span>           <span class="dt">Control.Monad</span>                  (when)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">import</span>           <span class="dt">Control.Monad.Trans.Class</span>      (lift)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw">import</span>           <span class="dt">Control.Monad.Trans.State.Lazy</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="ot">testFxn ::</span> <span class="dt">StateT</span> <span class="dt">Int</span> <span class="dt">Maybe</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">testFxn <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">  v <span class="ot">&lt;-</span> get</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">  x <span class="ot">&lt;-</span> lift <span class="fu">$</span> <span class="dt">Just</span> <span class="dt">True</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">  when x (put <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb3-10" data-line-number="10">  return <span class="dt">False</span></a></code></pre></div>
<p>The resultant state is 2, and the returned value is False. The <code>when</code> function is just a fun addition, it will execute its second argument if the first argument is true. Otherwise, it will result in a value of type <code>StateT Int Maybe ()</code> (Unit of this monad) in this case.</p>
<h1 id="combining-multiple-transformers">Combining multiple transformers</h1>
<p>The above is all well and good, but what if you want to use three monads instead of two? Let us say that we want to use the <code>Except</code> monad as well. Which is to say, we need a function which can:</p>
<ul>
<li>Throw custom exceptions</li>
<li>Maintain a state</li>
<li>Interact with the outside world</li>
</ul>
<p>This is easily possible in the realm of monad transformers. Observe the following:</p>
<ul>
<li><code>ExceptT</code> monad transformer is available in the <code>transformers</code> package.</li>
<li><code>ExceptT e m a</code> is its signature. Here, <code>m</code> must be a monad.</li>
<li><code>StateT s m</code> is a monad (how? this is off topic for this article).</li>
<li><code>StateT s IO</code> is a monad.</li>
<li>Using the above, <code>ExceptT e (StateT s IO)</code> is a monad.</li>
<li><code>ExceptT e (StateT s IO) a</code> is a computation in the <code>ExceptT e (StateT s IO)</code> monad, which returns a monadic/wrapped value of type <code>a</code>.</li>
</ul>
<p>Now we have, what we can think of, as a stack of monads. Monad transformers make such a stack possible. You can pile up as many monads as possible.</p>
<h2 id="lifting-when-you-have-multiple-monads">Lifting when you have multiple monads</h2>
<p>This is something that often confuses people. Remember the <code>lift</code> function? Let us rethink it.</p>
<p>Let us assume we have a monad stack like this (disregard the return value, and note that <code>monad_d</code> is not a transformer):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">type</span> <span class="dt">MSTACKTYPE</span> ret <span class="fu">=</span> monad_aT a (monad_bT b (monad_cT c monad_d)) ret</a></code></pre></div>
<p>What if you have a computation of the type <code>monad_d ret</code>? How would you execute it inside a do block of the type <code>MSTACKTYPE x</code>?</p>
<p>Think of <code>lift</code> as a function, which lifts a computation in a <span class="underline">lower</span> monad to a computation in a <span class="underline">higher</span> monad (<span class="underline">lower</span> and <span class="underline">higher</span> refer to the position in the monad transformer stack). Thus, a computation of the type <code>monad_d ret</code> can be converted to a computation of type <code>MSTACKTYPE ret</code> using the function <code>lift $ lift $ lift</code> (three times, because three layers have to be crossed).</p>
<h2 id="running-a-computation-which-has-multiple-monad-transformers">Running a computation which has multiple monad transformers</h2>
<p>Let us try to run the following computation:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">import</span>           <span class="dt">Control.Monad</span>                  (when)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">import</span>           <span class="dt">Control.Monad.Trans.Class</span>      (lift)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="kw">import</span>           <span class="dt">Control.Monad.Trans.State.Lazy</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="kw">import</span>           <span class="dt">Control.Monad.Trans.Except</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="ot">realLifeFunction ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">ExceptT</span> <span class="dt">String</span> (<span class="dt">StateT</span> <span class="dt">Int</span> <span class="dt">IO</span>) <span class="dt">Int</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">realLifeFunction input <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8">  x <span class="ot">&lt;-</span> lift <span class="fu">$</span> get</a>
<a class="sourceLine" id="cb5-9" data-line-number="9">  lift <span class="fu">$</span> lift <span class="fu">$</span> putStrLn <span class="fu">$</span> <span class="st">&quot;The original state is&quot;</span> <span class="fu">++</span> (show x)</a>
<a class="sourceLine" id="cb5-10" data-line-number="10">  lift <span class="fu">$</span> put input</a>
<a class="sourceLine" id="cb5-11" data-line-number="11">  return x</a></code></pre></div>
<p>This is slightly complicated, but you can easily do this with some thought and concentration :) We run each layer of the monad stack one by one, taking care to pass the proper arguments.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb6-1" data-line-number="1">runExceptT (runStateT (realLifeFunction <span class="dv">5</span>) <span class="dv">2</span>)<span class="ot"> ::</span> <span class="dt">IO</span> <span class="dt">Int</span></a></code></pre></div>
<p>This is a computation of type <code>IO Int</code>. The value will be printed when this IO computation is executed.</p>
<h1 id="abstraction"><span id="secabstraction"></span>Abstraction</h1>
<p>This section will focus on some common abstraction patterns seen in programs which use monad transformers. The subsections appear long-ish, but that’s because they contain repeated code. Please read the comments in the codes for the complete explanation.</p>
<h2 id="monad-typeclass"><span id="subsecmonadtypeclass"></span>Monad typeclass</h2>
<p>What if you have a computation running in the <code>StateT Int (ExceptT String IO)</code> monad, but, it needs to due a purely state operation? (An operation which does not do any operation in the Except or IO monad). Can we make this explicit at the type level?</p>
<p>It turns out that we can. We list three possible ways to do this, where the final one is the solution.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="ot">mainFxn ::</span> <span class="dt">StateT</span> <span class="dt">Int</span> (<span class="dt">ExceptT</span> <span class="dt">String</span> <span class="dt">IO</span>) <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">mainFxn <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3">  lift <span class="fu">$</span> lift <span class="fu">$</span> putStrLn <span class="st">&quot;Running function&quot;</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4">  doubleTheState</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">  st <span class="ot">&lt;-</span> get</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">  <span class="kw">let</span> ret <span class="fu">=</span> <span class="kw">if</span> (st <span class="fu">&gt;</span> <span class="dv">3</span>) <span class="kw">then</span> <span class="dt">True</span> <span class="kw">else</span> <span class="dt">False</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7">  return ret</a>
<a class="sourceLine" id="cb7-8" data-line-number="8"></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">-- This will NOT work, because 'StateT Int ()' cannot be run</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">-- inside a 'StateT Int (ExceptT String IO) Bool'</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="ot">doubleTheState' ::</span> <span class="dt">State</span> <span class="dt">Int</span> ()</a>
<a class="sourceLine" id="cb7-12" data-line-number="12">doubleTheState' <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13">  x <span class="ot">&lt;-</span> get</a>
<a class="sourceLine" id="cb7-14" data-line-number="14">  put (<span class="dv">2</span><span class="fu">*</span>x)</a>
<a class="sourceLine" id="cb7-15" data-line-number="15">  return ()</a>
<a class="sourceLine" id="cb7-16" data-line-number="16"></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">-- This will work, but our type is superfluous.</span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="co">-- We do not want the extra monads to stay in scope.</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="ot">doubleTheState'' ::</span> <span class="dt">StateT</span> <span class="dt">Int</span> (<span class="dt">ExceptT</span> <span class="dt">String</span> <span class="dt">IO</span>) ()</a>
<a class="sourceLine" id="cb7-20" data-line-number="20">doubleTheState'' <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21">  x <span class="ot">&lt;-</span> get</a>
<a class="sourceLine" id="cb7-22" data-line-number="22">  put (<span class="dv">2</span><span class="fu">*</span>x)</a>
<a class="sourceLine" id="cb7-23" data-line-number="23">  return ()</a>
<a class="sourceLine" id="cb7-24" data-line-number="24"></a>
<a class="sourceLine" id="cb7-25" data-line-number="25"><span class="co">-- This WILL WORK.</span></a>
<a class="sourceLine" id="cb7-26" data-line-number="26"><span class="ot">doubleTheState ::</span> <span class="dt">Monad</span> m <span class="ot">=&gt;</span> <span class="dt">StateT</span> <span class="dt">Int</span> m ()</a>
<a class="sourceLine" id="cb7-27" data-line-number="27">doubleTheState <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb7-28" data-line-number="28">  x <span class="ot">&lt;-</span> get</a>
<a class="sourceLine" id="cb7-29" data-line-number="29">  put (<span class="dv">2</span><span class="fu">*</span>x)</a>
<a class="sourceLine" id="cb7-30" data-line-number="30">  return ()</a></code></pre></div>
<h2 id="using-lift-to-abstract">Using lift to abstract</h2>
<p>The above section showed how you can abstract out the middle layers of the monad stack. What if you want to execute an action in a monad which is somewhere in the middle of the stack, without bothering about any other monads?</p>
<p>We can use a combination of <code>lift</code> and <code>Monad</code> typeclass.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co">-- NOTE: The monads order is flipped from the previous section.</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="ot">mainFxn ::</span> <span class="dt">ExceptT</span> <span class="dt">Int</span> (<span class="dt">StateT</span> <span class="dt">String</span> <span class="dt">IO</span>) <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3">mainFxn <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4">  <span class="co">-- Functions in the monad at the bottom of the stack (IO here)</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5">  <span class="co">-- can be run without any changes.</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6">  lift <span class="fu">$</span> lift <span class="fu">$</span> putStrLn <span class="st">&quot;Running function&quot;</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"></a>
<a class="sourceLine" id="cb8-8" data-line-number="8">  lift doubleTheState <span class="co">-- We can use lift to run this StateT computation</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"></a>
<a class="sourceLine" id="cb8-10" data-line-number="10">  st <span class="ot">&lt;-</span> lift get <span class="co">-- This requires a lift since StateT is buried one level deep.</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11">  <span class="kw">let</span> ret <span class="fu">=</span> <span class="kw">if</span> (st <span class="fu">&gt;</span> <span class="dv">3</span>) <span class="kw">then</span> <span class="dt">True</span> <span class="kw">else</span> <span class="dt">False</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12">  return ret</a>
<a class="sourceLine" id="cb8-13" data-line-number="13"></a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="co">-- Functions using monads in the middle of the stack need to use the</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15"><span class="co">-- (Monad m) type constraint.</span></a>
<a class="sourceLine" id="cb8-16" data-line-number="16"><span class="ot">doubleTheState ::</span> <span class="dt">Monad</span> m <span class="ot">=&gt;</span> <span class="dt">StateT</span> <span class="dt">Int</span> m ()</a>
<a class="sourceLine" id="cb8-17" data-line-number="17">doubleTheState <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb8-18" data-line-number="18">  x <span class="ot">&lt;-</span> get</a>
<a class="sourceLine" id="cb8-19" data-line-number="19">  put (<span class="dv">2</span><span class="fu">*</span>x)</a>
<a class="sourceLine" id="cb8-20" data-line-number="20">  return ()</a></code></pre></div>
<h2 id="monadio">MonadIO</h2>
<p>This is often the most used abstraction in codes heavy on IO. Imagine if you have to do something like <code>doubleTheState</code> in <a href="#subsecmonadtypeclass">the section on Monad typeclass</a>, but you also need to do IO in that function. Basically, what if you want to do IO without bothering about other enclosing monads?</p>
<p><a href="https://www.stackage.org/haddock/lts-11.1/base-4.10.1.0/Control-Monad-IO-Class.html">MonadIO</a> is a type constraint which is satisfied by all monads which contain IO somewhere in their monad stack. Thus, <code>StateT Int (ExceptT String IO)</code> satisfies MonadIO, but <code>ExceptT String (State Int)</code> does not.</p>
<p>This package also provides a helper function <code>liftIO</code>, which applies however many <code>lift s</code> are necessary to execute an IO action in the current monad.</p>
<p>All this is best explained through examples.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">import</span>           <span class="dt">Control.Monad.IO.Class</span>         (<span class="dt">MonadIO</span>, liftIO)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw">import</span>           <span class="dt">Control.Monad.Trans.Class</span>      (lift)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="kw">import</span>           <span class="dt">Control.Monad.Trans.Except</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="kw">import</span>           <span class="dt">Control.Monad.Trans.State.Lazy</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">-- liftIO allows executing IO operations</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">-- inside any monad which satisfies MonadIO.</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="ot">printer ::</span> <span class="dt">MonadIO</span> m <span class="ot">=&gt;</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> m <span class="dt">Int</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9">printer input <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10">  liftIO <span class="fu">$</span> print input <span class="co">-- liftIO can do IO actions</span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11">  return <span class="fu">$</span> input <span class="fu">+</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"></a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="ot">complexPrinter ::</span> <span class="dt">MonadIO</span> m <span class="ot">=&gt;</span> <span class="dt">ExceptT</span> <span class="dt">String</span> (<span class="dt">StateT</span> <span class="dt">Int</span> m) ()</a>
<a class="sourceLine" id="cb9-14" data-line-number="14">complexPrinter <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15">  x <span class="ot">&lt;-</span> lift get</a>
<a class="sourceLine" id="cb9-16" data-line-number="16">  printer x   <span class="co">-- This can be run normally</span></a>
<a class="sourceLine" id="cb9-17" data-line-number="17">  liftIO <span class="fu">$</span> putStrLn <span class="st">&quot;This works normally&quot;</span></a>
<a class="sourceLine" id="cb9-18" data-line-number="18">  return ()</a>
<a class="sourceLine" id="cb9-19" data-line-number="19"></a></code></pre></div>
<p>Note that with MonadIO, you can write very abstract functions which can be used in other monads without any need of <code>liftIO</code> (for instance, our <code>printer</code> function here).</p>
<h1 id="appendix">Appendix</h1>
<h2 id="monads"><span id="subsecmonads"></span>Monads</h2>
<p>As a quick review, monads are a functional abstraction, developed to help write imperative-style code in Haskell. If you are familiar with monads, feel free to skip this section.</p>
<p>Some of the things that a monad does are:</p>
<ul>
<li>Enforces ordering of statements</li>
<li>Provides a syntax sugar for carrying a state across functional calls</li>
<li>Easy short-circuit failure in program blocks which may throw an error</li>
</ul>
<p>An example of such a monadic code is:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="ot">aFxnWhichFails ::</span> <span class="dt">Maybe</span> <span class="dt">Int</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2">aFxnWhichFails <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3">  goodValue <span class="ot">&lt;-</span> <span class="dt">Just</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4">  thisWillShortCircuit <span class="ot">&lt;-</span> <span class="dt">Nothing</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5">  thisStatementWillNotRun <span class="ot">&lt;-</span> <span class="dt">Just</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6">  return <span class="fu">$</span> <span class="dt">Just</span> <span class="dv">2</span></a></code></pre></div>
<p>Here, we are executing inside the <code>Maybe</code> monad. The execution breaks-out when it encounters a <code>Nothing</code> value. Similarly, each monad implements a failure case, and a success case.</p>
<p>Some available monads are:</p>
<ul>
<li>Maybe</li>
<li>Either</li>
<li>Reader</li>
<li>State</li>
<li>Writer</li>
<li>IO</li>
</ul>
<p>IO is a special monad. It basically treats the whole program state as its underlying state, and lets you mutate it. Thus, all impure actions happen inside the IO monad. Printing values, reading values from console, network calls, reading or writing files, all these actions mutate the global state (repeating any of these actions twice may not show the same behaviour). Thus, all these actions are executed inside the IO monad.</p>
<h2 id="how-to-run-the-examples"><span id="subsechow-to-run"></span>How to run the examples</h2>
<p>The examples given in this post can be run in any recent <code>ghci</code> easily. I prefer to run them using <code>stack ghci --package transformers</code>. You can also run them by installing the package <code>transformers</code> with cabal, and then using <code>ghci</code>. The examples should also work if placed in a file and run with <code>runhaskell</code> like a regular haskell file.</p>
<h2 id="performance">Performance</h2>
<p>Sadly, the performance of monad transformers is not very good. There can be a significant performance hit at times, but it should be noted that most scenarios will have an underlying IO call to the network / file-system, which would often be the bottleneck. When it is not so, and the bottleneck is a non-IO computation refer to the <a href="#secabstraction">abstraction section</a> and convert your computation to a small monadic stack or a pure function.</p>
<p>The following links contain more information, and may be helpful if you ever run into performance issues due to monad transformers, although it is quite unlikely.</p>
<ul>
<li><a href="https://wiki.haskell.org/Performance/Monads" class="uri">https://wiki.haskell.org/Performance/Monads</a></li>
<li><a href="https://www.reddit.com/r/haskell/comments/1z3d2k/highperformance_monad_transformers_or_equivalent/" class="uri">https://www.reddit.com/r/haskell/comments/1z3d2k/highperformance_monad_transformers_or_equivalent/</a></li>
<li><a href="https://www.reddit.com/r/haskell/comments/5qpi15/expected_performance_drop_while_using_monad/" class="uri">https://www.reddit.com/r/haskell/comments/5qpi15/expected_performance_drop_while_using_monad/</a></li>
</ul>
        </div>
        <!-- partial("templates/partials/article_footer.html") -->
    </div>

    <!-- {{ partial "prev_next_post" . }} -->
</article>

<script src="../../../js/fb.js"></script>
<div class="fb-like" data-share="true" data-width="450" data-show-faces="true">
</div>

<script id="dsq-count-scr" src="//acehack.disqus.com/count.js" async></script>

<div id="disqus_thread"></div>
<script>
 // For debugging
 var disqus_developer = 1;
 var disqus_shortname = 'acehack';
 var disqus_config = function () {
     this.page.url = 'http://acehack.org/2018/03/monadt/index.html';
     this.page.identifier = 'monadt';
     this.page.title = 'Practical Monad Transformers';
 };
 (function() {
     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
     dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
 })();
 (function () {
     var s = document.createElement('script'); s.async = true;
     s.type = 'text/javascript';
     s.src = '//' + disqus_shortname + '.disqus.com/count.js';
     (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
 }());
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

        </section>

        

        

<aside id="sidebar">
    <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
        <ul class="category-list">
          
            <li class="category-list-item">
                <a class="category-list-link" href="../../../categories/abstract-thoughts.html">
                  abstract-thoughts
                </a>
            </li>
            
            <li class="category-list-item">
                <a class="category-list-link" href="../../../categories/algorithm.html">
                  algorithm
                </a>
            </li>
            
            <li class="category-list-item">
                <a class="category-list-link" href="../../../categories/career.html">
                  career
                </a>
            </li>
            
            <li class="category-list-item">
                <a class="category-list-link" href="../../../categories/editors.html">
                  editors
                </a>
            </li>
            
            <li class="category-list-item">
                <a class="category-list-link" href="../../../categories/experiments.html">
                  experiments
                </a>
            </li>
            
            <li class="category-list-item">
                <a class="category-list-link" href="../../../categories/linux.html">
                  linux
                </a>
            </li>
            
            <li class="category-list-item">
                <a class="category-list-link" href="../../../categories/networks.html">
                  networks
                </a>
            </li>
            
            <li class="category-list-item">
                <a class="category-list-link" href="../../../categories/poems.html">
                  poems
                </a>
            </li>
            
            <li class="category-list-item">
                <a class="category-list-link" href="../../../categories/programming.html">
                  programming
                </a>
            </li>
            
            <li class="category-list-item">
                <a class="category-list-link" href="../../../categories/projects.html">
                  projects
                </a>
            </li>
            
        </ul>
    </div>
</div>

    <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
        <ul class="category-list">
          
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/EFI.html">
                  EFI
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/OS.html">
                  OS
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/abcd.html">
                  abcd
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/algorithm.html">
                  algorithm
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/arch.html">
                  arch
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/battery.html">
                  battery
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/beginner.html">
                  beginner
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/blog.html">
                  blog
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/bootloader.html">
                  bootloader
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/browser.html">
                  browser
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/bumblebee.html">
                  bumblebee
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/career.html">
                  career
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/chaos.html">
                  chaos
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/coding.html">
                  coding
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/crypto.html">
                  crypto
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/cse.html">
                  cse
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/dynamic.html">
                  dynamic
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/elasticsearch.html">
                  elasticsearch
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/emacs.html">
                  emacs
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/esolang.html">
                  esolang
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/experience.html">
                  experience
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/experiment.html">
                  experiment
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/ffi.html">
                  ffi
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/gentoo.html">
                  gentoo
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/git.html">
                  git
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/github.html">
                  github
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/gnome.html">
                  gnome
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/golang.html">
                  golang
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/google.html">
                  google
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/grub.html">
                  grub
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/hakyll.html">
                  hakyll
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/haskell.html">
                  haskell
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/hop.html">
                  hop
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/i3wm.html">
                  i3wm
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/iitk.html">
                  iitk
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/install.html">
                  install
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/intern.html">
                  intern
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/job.html">
                  job
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/kernel.html">
                  kernel
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/kubernetes.html">
                  kubernetes
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/life.html">
                  life
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/linking.html">
                  linking
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/linux.html">
                  linux
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/monad-transformers.html">
                  monad-transformers
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/monads.html">
                  monads
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/mpi.html">
                  mpi
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/music.html">
                  music
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/musings.html">
                  musings
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/networks.html">
                  networks
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/nvidia.html">
                  nvidia
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/programming%20language.html">
                  programming language
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/puppy.html">
                  puppy
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/python.html">
                  python
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/scala.html">
                  scala
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/shell.html">
                  shell
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/short.html">
                  short
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/static.html">
                  static
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/techkriti.html">
                  techkriti
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/technical.html">
                  technical
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/tilingWM.html">
                  tilingWM
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/tty.html">
                  tty
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/video.html">
                  video
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/vim.html">
                  vim
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/virtualbox.html">
                  virtualbox
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/web.html">
                  web
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/xmonad.html">
                  xmonad
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
            <li class="category-list-item mydata">
                <a class="category-list-link" href="../../../tags/zsh.html">
                  zsh
                </a>
                <!-- <span class="category-list-count">{{ len items }}</span> -->
            </li>
            
        </ul>
    </div>
</div>

<script src="../../../js/tags.js"> </script>

    <!-- {{ if .Site.Params.widgets.recent_articles }} -->
<div class="widget-wrap">
    <h3 class="widget-title">
        <!-- {{with .Site.Data.l10n.widgets.recent_articles.title}}{{.}}{{end}} -->
        Recents
    </h3>
    <div class="widget">
        <ul id="recent-post">
            <!-- {{ range first 5 (where .Site.RegularPages "Type" "post") }} -->
            
            <li>
                <div class="item-thumbnail">
                    <a href="../../../2018/03/monadt/index.html" class="thumbnail">
                    <!-- {{ if and (isset .Params "banner") (not (eq .Params.banner "")) }} -->
                    <!--     <span style="background-image:url({{ .Params.banner | absURL }})" alt="{{ .Title }}" class="thumbnail-image"></span> -->
                    <!-- {{else}} -->
                        <span class="thumbnail-image thumbnail-none"></span>
                    <!-- {{ end }} -->
                    </a>
                </div>
                <div class="item-inner">
                    <!-- {{ if isset .Params "categories" }} -->
                    <!-- {{ if gt (len .Params.categories) 0 }} -->
                    <!-- <p class="item-category"> -->
                    <!--     {{ url := printf "%s/%s" "categories" (index .Params.categories 0 | urlize | lower)}} -->
                    <!--     <a class="article-category-link" href="{{ url | absURL }}"> -->
                    <!--     {{ index .Params.categories 0 }} -->
                    <!--     </a> -->
                    <!-- </p> -->
                    <!-- {{ end }} -->
                    <!-- {{ end }} -->
                    <p class="item-title"><a href="../../../2018/03/monadt/index.html" class="title">Practical Monad Transformers</a></p>
                    <p class="item-date">
                        <time datetime="March 23, 2018" itemprop="datePublished">March 23, 2018</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="../../../2018/03/es-insecure-http/index.html" class="thumbnail">
                    <!-- {{ if and (isset .Params "banner") (not (eq .Params.banner "")) }} -->
                    <!--     <span style="background-image:url({{ .Params.banner | absURL }})" alt="{{ .Title }}" class="thumbnail-image"></span> -->
                    <!-- {{else}} -->
                        <span class="thumbnail-image thumbnail-none"></span>
                    <!-- {{ end }} -->
                    </a>
                </div>
                <div class="item-inner">
                    <!-- {{ if isset .Params "categories" }} -->
                    <!-- {{ if gt (len .Params.categories) 0 }} -->
                    <!-- <p class="item-category"> -->
                    <!--     {{ url := printf "%s/%s" "categories" (index .Params.categories 0 | urlize | lower)}} -->
                    <!--     <a class="article-category-link" href="{{ url | absURL }}"> -->
                    <!--     {{ index .Params.categories 0 }} -->
                    <!--     </a> -->
                    <!-- </p> -->
                    <!-- {{ end }} -->
                    <!-- {{ end }} -->
                    <p class="item-title"><a href="../../../2018/03/es-insecure-http/index.html" class="title">Using self-signed certificates with ElasticSearch on Scala/Java</a></p>
                    <p class="item-date">
                        <time datetime="March 20, 2018" itemprop="datePublished">March 20, 2018</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="../../../2018/02/haskell-golang-ffi/index.html" class="thumbnail">
                    <!-- {{ if and (isset .Params "banner") (not (eq .Params.banner "")) }} -->
                    <!--     <span style="background-image:url({{ .Params.banner | absURL }})" alt="{{ .Title }}" class="thumbnail-image"></span> -->
                    <!-- {{else}} -->
                        <span class="thumbnail-image thumbnail-none"></span>
                    <!-- {{ end }} -->
                    </a>
                </div>
                <div class="item-inner">
                    <!-- {{ if isset .Params "categories" }} -->
                    <!-- {{ if gt (len .Params.categories) 0 }} -->
                    <!-- <p class="item-category"> -->
                    <!--     {{ url := printf "%s/%s" "categories" (index .Params.categories 0 | urlize | lower)}} -->
                    <!--     <a class="article-category-link" href="{{ url | absURL }}"> -->
                    <!--     {{ index .Params.categories 0 }} -->
                    <!--     </a> -->
                    <!-- </p> -->
                    <!-- {{ end }} -->
                    <!-- {{ end }} -->
                    <p class="item-title"><a href="../../../2018/02/haskell-golang-ffi/index.html" class="title">Calling Golang functions from Haskell</a></p>
                    <p class="item-date">
                        <time datetime="February 10, 2018" itemprop="datePublished">February 10, 2018</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="../../../2017/11/bootloaderefi/index.html" class="thumbnail">
                    <!-- {{ if and (isset .Params "banner") (not (eq .Params.banner "")) }} -->
                    <!--     <span style="background-image:url({{ .Params.banner | absURL }})" alt="{{ .Title }}" class="thumbnail-image"></span> -->
                    <!-- {{else}} -->
                        <span class="thumbnail-image thumbnail-none"></span>
                    <!-- {{ end }} -->
                    </a>
                </div>
                <div class="item-inner">
                    <!-- {{ if isset .Params "categories" }} -->
                    <!-- {{ if gt (len .Params.categories) 0 }} -->
                    <!-- <p class="item-category"> -->
                    <!--     {{ url := printf "%s/%s" "categories" (index .Params.categories 0 | urlize | lower)}} -->
                    <!--     <a class="article-category-link" href="{{ url | absURL }}"> -->
                    <!--     {{ index .Params.categories 0 }} -->
                    <!--     </a> -->
                    <!-- </p> -->
                    <!-- {{ end }} -->
                    <!-- {{ end }} -->
                    <p class="item-title"><a href="../../../2017/11/bootloaderefi/index.html" class="title">Things no one told me about EFI</a></p>
                    <p class="item-date">
                        <time datetime="November 27, 2017" itemprop="datePublished">November 27, 2017</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="../../../2017/08/googleintern17/index.html" class="thumbnail">
                    <!-- {{ if and (isset .Params "banner") (not (eq .Params.banner "")) }} -->
                    <!--     <span style="background-image:url({{ .Params.banner | absURL }})" alt="{{ .Title }}" class="thumbnail-image"></span> -->
                    <!-- {{else}} -->
                        <span class="thumbnail-image thumbnail-none"></span>
                    <!-- {{ end }} -->
                    </a>
                </div>
                <div class="item-inner">
                    <!-- {{ if isset .Params "categories" }} -->
                    <!-- {{ if gt (len .Params.categories) 0 }} -->
                    <!-- <p class="item-category"> -->
                    <!--     {{ url := printf "%s/%s" "categories" (index .Params.categories 0 | urlize | lower)}} -->
                    <!--     <a class="article-category-link" href="{{ url | absURL }}"> -->
                    <!--     {{ index .Params.categories 0 }} -->
                    <!--     </a> -->
                    <!-- </p> -->
                    <!-- {{ end }} -->
                    <!-- {{ end }} -->
                    <p class="item-title"><a href="../../../2017/08/googleintern17/index.html" class="title">Interning at Google Seattle</a></p>
                    <p class="item-date">
                        <time datetime="August  5, 2017" itemprop="datePublished">August  5, 2017</time>
                    </p>
                </div>
            </li>
            
            <!-- {{ end }} -->
        </ul>
    </div>
</div>
<!-- {{ end }} -->

    <!-- {{ partial "widgets/tag_cloud" . }} -->

    <div id="toTop" class="fa fa-angle-up"></div>
</aside>


      </div>
    </div>
    <footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      Saksham Sharma
      <!-- &copy; {{ now.Format "2006"}} -->
      <!-- {{ with .Site.Params.copyright }}{{ . | markdownify}}{{ end }} -->
    </div>
  </div>
</footer>

<!-- {{ partial "footer_js" . }} -->
<!-- {{ partial "footer_custom_js" . }} -->
  </body>
</html>
